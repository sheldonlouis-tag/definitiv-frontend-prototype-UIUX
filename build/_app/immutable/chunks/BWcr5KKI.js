import{w as s}from"./m8c6eoRv.js";const u=()=>{{const e=localStorage.getItem("auth");if(e)try{const t=JSON.parse(e);return{user:t.user,isAuthenticated:!!t.user,isLoading:!1,error:null}}catch{}}return{user:null,isAuthenticated:!1,isLoading:!1,error:null}},r=s(u());r.subscribe(e=>{localStorage.setItem("auth",JSON.stringify({user:e.user,isAuthenticated:e.isAuthenticated}))});const i={async signIn(e){r.update(t=>({...t,isLoading:!0,error:null}));try{await new Promise(a=>setTimeout(a,1e3));const t={id:"1",email:e,name:e.split("@")[0],role:"user"};return r.update(a=>({...a,user:t,isAuthenticated:!0,isLoading:!1,error:null})),!0}catch(t){return r.update(a=>({...a,isLoading:!1,error:t instanceof Error?t.message:"Authentication failed"})),!1}},signOut(){r.update(e=>({...e,user:null,isAuthenticated:!1,error:null})),localStorage.removeItem("auth")},clearError(){r.update(e=>({...e,error:null}))}};export{r as a,i as b};
